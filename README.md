
# yt_subs_dl

This project provides a CLI tool to download and format subtitles from YouTube videos.

## Overview

The tool extracts the text from a video's subtitles, joining them together into a more readable format.
It can insert newlines for long pauses and handles language-specific spacing
(e.g., adding spaces for English but not for Japanese).

## Getting Started

This project uses [Nix](https://nixos.org/) to manage the development environment, ensuring all dependencies are handled reproducibly.

1.  **Install Nix:** If you don't have Nix installed, follow the instructions at
  [nixos.org](https://nixos.org/download.html).
2.  **Enable Flakes:** Ensure that Nix Flakes are enabled.
  You may need to add `experimental-features = nix-command flakes` to your Nix configuration.
3.  **Enter the Development Shell:** Navigate to the project directory and run:
  ```bash
  nix develop
  ```
  This command will automatically download and set up all the necessary dependencies, including Python and the required libraries.

## Usage

Once inside the development shell, you can run the script using `python3`.

### Basic Usage

```bash
python3 yt_subs_dl.py "<YOUTUBE_VIDEO_URL>"
```

### Options

- `-t, --threshold <SECONDS>`: Set the time threshold (in seconds) for inserting a newline. Default is `5.0`.
- `-l, --languages <LANG_CODES>`: Comma-separated list of preferred language codes (e.g., `en,ja`). Default is `ja,en`.
- `-D, --no-prefer-default-language`: Do not automatically prioritize the video's native language.
- `-v, --verbose`: Enable verbose output, showing selected language and raw VTT content.
- `-r, --raw`: Output the raw SRT content without any formatting.
- `--help`: Show the help message.

### Examples

**Download Japanese subtitles (default behavior):**
```bash
python3 yt_subs_dl.py "https://www.youtube.com/watch?v=..."
```

**Download English subtitles with a 3.5-second threshold:**
```bash
python3 yt_subs_dl.py --languages en --threshold 3.5 "https://www.youtube.com/watch?v=..."
```

## Development

The development environment is defined in `flake.nix`.
If you need to add new Python packages, add them to the `buildInputs` list within the `flake.nix` file.

The main application logic is in `yt_subs_dl.py`.

### AI Generation

A significant portion of the code in this project has been generated by an AI assistant,
specifically `gemini-cli`. This approach aims to accelerate development and maintain code quality.
